<main class="shell">
	<header class="header">
		<div>
			<p class="eyebrow">Flowload</p>
			<h1>Confirm download</h1>
		</div>
		<button class="ghost" type="button" (click)="reload()">Refresh</button>
	</header>

	@if (pending(); as item) {
	<section class="card">
		<div class="row">
			<span class="label">Name</span>
			<span class="value">{{ item.filename || '—' }}</span>
		</div>
		<div class="row">
			<span class="label">Extension</span>
			<span class="value">{{ item.extension || '—' }}</span>
		</div>
		<div class="row">
			<span class="label">Folder</span>
			<div class="field-inline">
				<input type="text" [value]="folder()" readonly placeholder="Select a folder" />
				<button class="ghost" type="button" [disabled]="busy()" (click)="chooseFolder()">Choose…</button>
			</div>
		</div>
		<div class="row">
			<span class="label">File name</span>
			<input
				type="text"
				placeholder="rename before saving"
				[value]="filename()"
				(input)="filename.set($any($event.target).value || '')"
			/>
		</div>
		<div class="row">
			<span class="label">Will save to</span>
			<span class="value">{{ targetPath() || item.targetPath || '—' }}</span>
		</div>
		<div class="row">
			<span class="label">Source</span>
			<span class="value url">{{ item.url || '—' }}</span>
		</div>

		<div class="actions">
			<button class="primary" type="button" [disabled]="busy()" (click)="proceed()">
				{{ busy() ? 'Working…' : 'Proceed with download' }}
			</button>
			<button class="ghost" type="button" [disabled]="busy()" (click)="cancel()">Cancel download</button>
		</div>
	</section>
	} @else {
	<section class="card empty">
		<p>No download is waiting for confirmation.</p>
	</section>
	}

	<footer class="footer">{{ status() }}</footer>
</main>